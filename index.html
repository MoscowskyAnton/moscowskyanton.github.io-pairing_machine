<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PyScript: График с matplotlib</title>

    <!-- Подключение PyScript (замена устаревших ссылок на рабочие) -->
    <link rel="stylesheet" href="https://pyscript.net/releases/2024.1.1/core.css" />
    <script type="module" src="https://pyscript.net/releases/2024.1.1/core.js"></script>

    <py-env>
        - numpy
    </py-env>
</head>
<body>
    <h1>PyScript: График с matplotlib</h1>

    <py-script>
import asyncio
import pyodide

# Асинхронная функция для загрузки micropip и matplotlib
async def main():
    await pyodide.loadPackage("micropip")
    import micropip
    await micropip.install("matplotlib")

    import numpy as np
    import matplotlib.pyplot as plt

    x = np.random.rand(100)
    y = np.random.rand(100)

    plt.scatter(x, y)
    plt.show()

# Запуск корутины в фоне без top-level await
asyncio.ensure_future(main())
    </py-script>
</body>
</html>
